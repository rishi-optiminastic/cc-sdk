<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarbonCut SDK Test</title>
</head>
<body>
    <h1>CarbonCut SDK Test Page</h1>
    
    <div id="status">
        <h2>SDK Status</h2>
        <p id="init-status">Not initialized</p>
        <p id="session-info"></p>
    </div>

    <div id="controls">
        <h2>Test Controls</h2>
        <button onclick="testInit()">Initialize SDK</button>
        <button onclick="testCustomEvent()">Track Custom Event</button>
        <button onclick="testPageView()">Track Page View</button>
        <button onclick="testPing()">Trigger Ping</button>
        <button onclick="getInfo()">Get Session Info</button>
        <button onclick="enableDebug()">Enable Debug</button>
    </div>

    <div id="events">
        <h2>Events Log</h2>
        <pre id="log"></pre>
    </div>

    <!-- Load your built SDK -->
    <script src="dist/carboncut.js"></script>
    
    <script>
        let log = [];
        
        function addLog(message) {
            log.push(`[${new Date().toISOString()}] ${message}`);
            document.getElementById('log').textContent = log.join('\n');
        }

        function testInit() {
            const success = CarbonCut.init({
                trackerToken: 'test_token_123', 
                apiUrl: 'http://127.0.0.1:8000/api/v1/events/',
                debug: true,
                pingInterval: 10000 
            });
            
            if (success) {
                document.getElementById('init-status').textContent = '✅ Initialized';
                addLog('SDK initialized successfully');
            } else {
                document.getElementById('init-status').textContent = '❌ Failed';
                addLog('SDK initialization failed');
            }
        }

        function testCustomEvent() {
            CarbonCut.trackEvent('button_clicked', {
                button_name: 'test_button',
                timestamp: Date.now()
            });
            addLog('Custom event tracked: button_clicked');
        }

        function testPageView() {
            CarbonCut.trackPageView('/test-page');
            addLog('Page view tracked: /test-page');
        }

        function testPing() {
            CarbonCut.ping();
            addLog('Manual ping triggered');
        }

        function getInfo() {
            const info = CarbonCut.getSessionInfo();
            document.getElementById('session-info').textContent = JSON.stringify(info, null, 2);
            addLog('Session info retrieved');
        }

        function enableDebug() {
            CarbonCut.enableDebug();
            addLog('Debug mode enabled');
        }

        // Auto-initialize on load
        window.addEventListener('load', () => {
            addLog('Page loaded, ready to test');
        });
    </script>
</body>
</html>